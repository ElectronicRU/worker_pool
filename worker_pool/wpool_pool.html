<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>wpool_pool (worker_pool) -  (Erlang Documentation)</title>
    <link href="../erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-44246018-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>wpool_pool</h1>
<h2 class="modsummary">A&nbsp;pool&nbsp;of&nbsp;workers.</h2>
<div class="description">
<p>A&nbsp;pool&nbsp;of&nbsp;workers.&nbsp;If&nbsp;you&nbsp;want&nbsp;to&nbsp;put&nbsp;it&nbsp;in&nbsp;your&nbsp;supervisor&nbsp;tree,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remember&nbsp;it's&nbsp;a&nbsp;supervisor.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
&nbsp;&nbsp;&nbsp;&nbsp;<div class="type"><h3 id="type-wpool">wpool() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#wpool{name = undefined | <a href="/Users/elbrujohalcon/Projects/inaka/worker_pool/doc/wpool.html#type-name" class="seealso">wpool:name()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size = undefined | integer() >= 1,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next = undefined | integer() >= 1,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;opts = undefined | [<a href="/Users/elbrujohalcon/Projects/inaka/worker_pool/doc/wpool.html#type-option" class="seealso">wpool:option()</a>],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;qmanager = undefined | <a href="wpool_queue_manager.html#type-queue_mgr" class="seealso">wpool_queue_manager:queue_mgr()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;born = <a href="erlang.html#type-timestamp" class="seealso">erlang:timestamp()</a>}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="create_table/0">create_table()&nbsp;-&gt;&nbsp;ok</h3>


<div class="description">

<p>Creates&nbsp;the&nbsp;ets&nbsp;table&nbsp;that&nbsp;will&nbsp;hold&nbsp;the&nbsp;information&nbsp;about&nbsp;active&nbsp;pools</p>
</div></div>
<div class="function">
<h3 id="start_link/1">start_link(Name::name()&nbsp;(see&nbsp;module&nbsp;wpool),&nbsp;Options::[option()&nbsp;(see&nbsp;module&nbsp;wpool)])&nbsp;-&gt;&nbsp;{ok,&nbsp;pid()}&nbsp;|&nbsp;{error,&nbsp;{already_started,&nbsp;pid()}&nbsp;|&nbsp;term()}</h3>


<div class="description">

<p>Starts&nbsp;a&nbsp;supervisor&nbsp;with&nbsp;several&nbsp;<a href="wpool_process.html" class="seealso">wpool_process</a>es&nbsp;as&nbsp;its&nbsp;children</p>
</div></div>
<div class="function">
<h3 id="best_worker/1">best_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool))&nbsp;-&gt;&nbsp;atom()</h3>


<div class="description">

<p>Picks&nbsp;the&nbsp;worker&nbsp;with&nbsp;the&nbsp;smaller&nbsp;queue&nbsp;of&nbsp;messages.</p>
</div></div>
<div class="function">
<h3 id="random_worker/1">random_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool))&nbsp;-&gt;&nbsp;atom()</h3>


<div class="description">

<p>Picks&nbsp;a&nbsp;random&nbsp;worker</p>
</div></div>
<div class="function">
<h3 id="next_worker/1">next_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool))&nbsp;-&gt;&nbsp;atom()</h3>


<div class="description">

<p>Picks&nbsp;the&nbsp;next&nbsp;worker&nbsp;in&nbsp;a&nbsp;round&nbsp;robin&nbsp;fashion</p>
</div></div>
<div class="function">
<h3 id="call_available_worker/1">call_available_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool),&nbsp;Call::any(),&nbsp;Timeout::timeout())&nbsp;-&gt;&nbsp;any()</h3>


<div class="description">

<p>Picks&nbsp;the&nbsp;first&nbsp;available&nbsp;worker&nbsp;and&nbsp;sends&nbsp;the&nbsp;call&nbsp;to&nbsp;it.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;timeout&nbsp;provided&nbsp;includes&nbsp;the&nbsp;time&nbsp;it&nbsp;takes&nbsp;to&nbsp;get&nbsp;a&nbsp;worker
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;for&nbsp;it&nbsp;to&nbsp;process&nbsp;the&nbsp;call.</p>
</div></div>
<div class="function">
<h3 id="sync_send_event_to_available_worker/1">sync_send_event_to_available_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool),&nbsp;Event::any(),&nbsp;Timeout::timeout())&nbsp;-&gt;&nbsp;any()</h3>


<div class="description">

<p>Picks&nbsp;the&nbsp;first&nbsp;available&nbsp;worker&nbsp;and&nbsp;sends&nbsp;the&nbsp;event&nbsp;to&nbsp;it.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;timeout&nbsp;provided&nbsp;includes&nbsp;the&nbsp;time&nbsp;it&nbsp;takes&nbsp;to&nbsp;get&nbsp;a&nbsp;worker
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;for&nbsp;it&nbsp;to&nbsp;process&nbsp;the&nbsp;call.</p>
</div></div>
<div class="function">
<h3 id="sync_send_all_event_to_available_worker/1">sync_send_all_event_to_available_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool),&nbsp;Event::any(),&nbsp;Timeout::timeout())&nbsp;-&gt;&nbsp;any()</h3>


<div class="description">

<p>Picks&nbsp;the&nbsp;first&nbsp;available&nbsp;worker&nbsp;and&nbsp;sends&nbsp;the&nbsp;event&nbsp;to&nbsp;it.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The&nbsp;timeout&nbsp;provided&nbsp;includes&nbsp;the&nbsp;time&nbsp;it&nbsp;takes&nbsp;to&nbsp;get&nbsp;a&nbsp;worker
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;for&nbsp;it&nbsp;to&nbsp;process&nbsp;the&nbsp;call.</p>
</div></div>
<div class="function">
<h3 id="hash_worker/1">hash_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool),&nbsp;HashKey::term())&nbsp;-&gt;&nbsp;atom()</h3>


<div class="description">

<p>Picks&nbsp;a&nbsp;worker&nbsp;base&nbsp;on&nbsp;a&nbsp;hash&nbsp;result.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><pre class="sh_erlang">phash2(Term,&nbsp;Range)</pre><p>&nbsp;returns&nbsp;hash&nbsp;=&nbsp;integer,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0&nbsp;&lt;=&nbsp;hash&nbsp;&lt;&nbsp;Range&nbsp;so&nbsp;</p><pre class="sh_erlang">1</pre><p>&nbsp;must&nbsp;be&nbsp;added</p>
</div></div>
<div class="function">
<h3 id="cast_to_available_worker/1">cast_to_available_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool),&nbsp;Cast::term())&nbsp;-&gt;&nbsp;ok</h3>


<div class="description">

<p>Casts&nbsp;a&nbsp;message&nbsp;to&nbsp;the&nbsp;first&nbsp;available&nbsp;worker.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Since&nbsp;we&nbsp;can&nbsp;wait&nbsp;forever&nbsp;for&nbsp;a&nbsp;wpool:cast&nbsp;to&nbsp;be&nbsp;delivered
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;we&nbsp;don't&nbsp;want&nbsp;the&nbsp;caller&nbsp;to&nbsp;be&nbsp;blocked,&nbsp;this&nbsp;function
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;just&nbsp;forwards&nbsp;the&nbsp;cast&nbsp;when&nbsp;it&nbsp;gets&nbsp;the&nbsp;worker</p>
</div></div>
<div class="function">
<h3 id="send_event_to_available_worker/1">send_event_to_available_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool),&nbsp;Event::term())&nbsp;-&gt;&nbsp;ok</h3>


<div class="description">

<p>Sends&nbsp;an&nbsp;event&nbsp;to&nbsp;the&nbsp;first&nbsp;available&nbsp;worker.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Since&nbsp;we&nbsp;can&nbsp;wait&nbsp;forever&nbsp;for&nbsp;a&nbsp;wpool:send_event&nbsp;to&nbsp;be&nbsp;delivered
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;we&nbsp;don't&nbsp;want&nbsp;the&nbsp;caller&nbsp;to&nbsp;be&nbsp;blocked,&nbsp;this&nbsp;function
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;just&nbsp;forwards&nbsp;the&nbsp;event&nbsp;when&nbsp;it&nbsp;gets&nbsp;the&nbsp;worker</p>
</div></div>
<div class="function">
<h3 id="send_all_event_to_available_worker/1">send_all_event_to_available_worker(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool),&nbsp;Event::term())&nbsp;-&gt;&nbsp;ok</h3>


<div class="description">

<p>Sends&nbsp;an&nbsp;event&nbsp;to&nbsp;the&nbsp;first&nbsp;available&nbsp;worker.
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Since&nbsp;we&nbsp;can&nbsp;wait&nbsp;forever&nbsp;for&nbsp;a&nbsp;wpool:send_event&nbsp;to&nbsp;be&nbsp;delivered
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;but&nbsp;we&nbsp;don't&nbsp;want&nbsp;the&nbsp;caller&nbsp;to&nbsp;be&nbsp;blocked,&nbsp;this&nbsp;function
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;just&nbsp;forwards&nbsp;the&nbsp;event&nbsp;when&nbsp;it&nbsp;gets&nbsp;the&nbsp;worker</p>
</div></div>
<div class="function">
<h3 id="stats/1">stats(Sup::name()&nbsp;(see&nbsp;module&nbsp;wpool))&nbsp;-&gt;&nbsp;stats()&nbsp;(see&nbsp;module&nbsp;wpool)</h3>


<div class="description">

<p>Retrieves&nbsp;a&nbsp;snapshot&nbsp;of&nbsp;the&nbsp;pool&nbsp;stats</p>
</div></div>
<div class="function">
<h3 id="worker_names/1">worker_names(Pool_Name::name()&nbsp;(see&nbsp;module&nbsp;wpool))&nbsp;-&gt;&nbsp;[atom()]</h3>


<div class="description">

<p>Returns&nbsp;the&nbsp;names&nbsp;of&nbsp;the&nbsp;workers&nbsp;in&nbsp;the&nbsp;pool</p>
</div></div>
<div class="function">
<h3 id="wpool_size/1">wpool_size(Name::atom())&nbsp;-&gt;&nbsp;non_neg_integer()&nbsp;|&nbsp;undefined</h3>


<div class="description">

<p>the&nbsp;number&nbsp;of&nbsp;workers&nbsp;in&nbsp;the&nbsp;pool</p>
</div></div>
<div class="function">
<h3 id="wpool_set/1">wpool_set(Tail::[{atom(),&nbsp;any()}],&nbsp;WPool::wpool())&nbsp;-&gt;&nbsp;wpool()</h3>


<div class="description">

<p>Set&nbsp;values&nbsp;from&nbsp;the&nbsp;worker&nbsp;pool&nbsp;record.&nbsp;Useful&nbsp;when&nbsp;using
&nbsp;&nbsp;a&nbsp;custom&nbsp;strategy&nbsp;function.</p>
</div></div>
<div class="function">
<h3 id="wpool_get/1">wpool_get(List::atom(),&nbsp;WPool::wpool())&nbsp;-&gt;&nbsp;any()</h3>


<div class="description">

<p>Get&nbsp;values&nbsp;from&nbsp;the&nbsp;worker&nbsp;pool&nbsp;record.&nbsp;Useful&nbsp;when&nbsp;using&nbsp;a&nbsp;custom
&nbsp;&nbsp;strategy&nbsp;function.</p>
</div></div>
<div class="function">
<h3 id="find_wpool/1">find_wpool(Name::atom())&nbsp;-&gt;&nbsp;wpool()</h3>


<div class="description">

<p>Use&nbsp;this&nbsp;function&nbsp;to&nbsp;get&nbsp;the&nbsp;Worker&nbsp;pool&nbsp;record&nbsp;in&nbsp;a&nbsp;custom&nbsp;worker.</p>
</div></div></div>

<authors>

<aname>Fernando&nbsp;Benavides</aname>
<email>elbrujohalcon@inaka.net</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="../jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="../erldocs.js"></script>
  </body>
</html>
